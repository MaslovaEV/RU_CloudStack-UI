.. _ConfigGuide_RU:

Руководство по конфигурациям CloudStack-UI
===========================================

.. Contents::

В файле ```default-configuration.ts``` содержаться настройки системы по-умолчанию, которые не предназначены для редактирования пользователем. Конфигурирование системы можно осуществить путем добавления пользовательского файла конфигураций ```config.json``` с желаемыми параметрами во время разворачивания системы или во время разработки. В данном руководстве описаны основные настройки приложения, которые можно задать через пользовательский файл конфигураций.

.. note:: Значения пользовательских настроек имеют преимущество перед настройками, заданными по умолчанию, при условии, что значения указаны корректно. Правила валидации приведены в разделе для тех параметров, для которых они существуют.

Общие настройки
---------------------------

Базовый доменный URL
"""""""""""""""""""""""""""""
Позволяет задать доменный URL, который задается в поле Домен при входе в систему. 

::

 "defaultDomain": "domain"
 
.. _ThemeName_RU:

Название цветовой темы
"""""""""""""""""""""""""""""

Позволяет определить предпочитаемую цветовую тему UI. Доступны следующие значения:

::

 "blue-red"
 "indigo-pink"

По умолчанию спользуется тема blue-red:

::

 "defaultThemeName": "blue-red"

.. _defaultInterfaceLanguage_RU:

Язык интерфейса
"""""""""""""""""""""""""""""""""

Позволяет задать язык интерфейса. Допустимые значения:

::

    "en" (значение по-умолчанию)
    "ru"

Например,

"defaultInterfaceLanguage": "en"

.. _defaultTimeFormat_RU:

Формат времении
""""""""""""""""""""""""""""""""

Позволяет задать формат времени: 12-часовой, 24-часовой или автоматически определяемый (в зависимости от языка интерфейса). Допустимые значения:

::

    "auto" - значение зависит от языка интерфейса (значение по умолчанию),
    "hour12" - 12-часовой формат,
    "hour24" - 24-часовой формат.

Например,

"defaultTimeFormat": "hour24",

.. _defaultFirstDayOfWeek_RU:

Первый день недели
""""""""""""""""""""""""""

Позволяет задать тип недели: 'воскресенье - суббота' или 'понедельник - воскресенье', указав первый день недели. Допустимые значения:

::

    0 - воскресенье
    1 - понедельник (значение по умолчанию)

Например,

"defaultFirstDayOfWeek": 0

 
Изменение порядка разделов в меню
"""""""""""""""""""""""""""""""""""""""
Позволяет установить возможность/невозможность редактирования порядка разделов в навигационном меню слева.

::

 "allowReorderingSidebar": false 
 
Порядок разделов меню
"""""""""""""""""""""""""""

Позволяет задать порядок разделов меню в виде списка. Доступно при активации опции изменения порядка разделов в меню (```"allowReorderingSidebar": true```).

Например:

::

 "configureSidebar": [
  "vms",
  "volumes",
  "templates",
  "sgs",
  "events",
  "ssh",
  "accounts",
 "settings"
 ]

.. _SessionTimeout_RU:

Время сеанса
""""""""""""""""""""""

Позволяет задать максимальное количество времени в минутах, в течение которого сессия будет оставаться активной в отсутствие действий пользователя. По истечении этого времени пользователь автоматически покидает систему.

По умолчанию установлен период времени 30 минут.

Для отключения данной опции можно задать значение 0, но в этом случае сессия будет прервана на стороне сервера.

::

 "sessionTimeout": 30
 
.. _SessionRefresh_RU:

Интервал обновления сессии
"""""""""""""""""""""""""""""""""

Позволяет установить период времени (в секундах) для обновления сессии: 

::

 "sessionRefreshInterval": 60,

.. _AccountTags_RU:

Включение тегов аккаунта
""""""""""""""""""""""""""""""

Теги аккаунта доступны только в последней версии API. Если используется другая версия API, следует указать значение ``false``.

::

 "accountTagsEnabled": false

Настройки групп безопасности
----------------------------------

.. _SecurityGrTemplate:

Шаблоны группы безопасности
"""""""""""""""""""""""""""""""""""

Позволяет создать предзаданные шаблоны для групп безопасности. Можно определить собственные группы безопасности, которые будут доступны по умолчанию для всех пользователей. 

Формат:

::

 "securityGroupTemplates": [
    {
      "id": "templateTCP",
      "name": "TCP Permit All",
      "description": "Permits all TPC traffic",
      "preselected": true,
      "ingressrule": [
        {
          "ruleid": "9552c7e9-9421-4a16-8a09-00a6bab4aa5a",
          "protocol": "tcp",
          "startport": 1,
          "endport": 65535,
          "cidr": "0.0.0.0/0"
        }
      ],
      "egressrule": [
        {
          "ruleid": "dcaeefe0-0014-4431-b21d-db2e66f9162d",
          "protocol": "tcp",
          "startport": 1,
          "endport": 65535,
          "cidr": "0.0.0.0/0"
        }
      ]
    },
    {...}
 ]

Параметры:

- id - уникальный идентификатор;
- имя;
- описание;
- предвыбранные (true или false) - указывает, будут ли правила из данного шаблона автоматически применяться к новым машинам;
- входящие и исходящие (соответственно ``ingressrule`` и ``egressrule``):

 - ruleid: уникальный идентификатор;
 - protocol: 'tcp', 'udp' или 'icmp'
 - cidr: маска подсети (e.g. 0.0.0.0/0);
 - Для TCP и UDP: startport и endport;
 - Для ICMP: icmpcode и icmptype.
 

Настройки виртуальных машин
----------------------------------

Цвет ВМ
"""""""""""""""""

Позволяет задать набор цветов для обозначения виртуальных машин в шестнадцатиричном формате. Можно указать любые цвета по желанию.

::

 "vmColors": [
    {
      "value": "#F44336"
    }
 ]

Настройки дисковых и вычислительных предложений
--------------------------------------------------------

.. _OfferingAvailability_RU:

Доступность предложений
"""""""""""""""""""""""""""
Позволяет задать предложения, доступные для определенных зон. Формат:

::

 offeringAvailability: {
  "filterOfferings": true,
    "zoneId": {
      "diskOfferings": ["offeringId1", "offeringId2"],
      "serviceOfferings": ["offeringId3", "offeringId4"]
    }
 }

Если ``filterOfferings = false``, все предложения доступны для всех зон.

.. _SO_Limits_RU:

Ограничения пользовательских предложений
"""""""""""""""""""""""""""""""""""""""""""""""
Позволяет задать ограничения для пользовательских предложений в следующем формате:

::

 "customOfferingRestrictions": {
  "offeringId1": {
    "cpuNumber": {
      "min": number,
      "max": number
    },
    "cpuSpeed": {
      "min": speed_in_mhz,
      "max": speed_in_mhz
    },
    "memory": {
      "min": memory_in_mb,
      "max": memory_in_mb
    }
  }
 }

Любой их этих параметров можно оставить неопределенным. Тогда в качестве минимального и максимального значений будут использоваться 0 и бесконечность соответственно.

.. _ServiceOfferingClasses_RU:

Классы вычислительных предложений
"""""""""""""""""""""""""""""""""""""""""""""

В данном блоке можно задать классы вычислительных предложений в следующем формате:

::

 "serviceOfferingClasses": [
  {
    "id": "class_id",
    "name": {
       "ru": "class_name_ru",
       "en": "class_name_en"
    },
    "description": {
      "ru": "class_description_ru",
      "en": "class_description_en"
    },
    "serviceOfferings": [
      "so-id1",
      "so-id2"
    ]
   }
 ]

Для каждого класса необходимо указать уникальный id, название, описание и список id вычислительных предложений, относящихся к данному классу. Название и описание необходимо локализовать в соответствии с используемыми языками.

.. _DiskOfferingParameters_RU:

Параметры дисковых предложений
"""""""""""""""""""""""""""""""""""""""

Позволяет установить параметры дисковых предложений, отображаемых в таблице дисковых предложений.

Например,

::

 "diskOfferingParameters": [
  "displaytext",
  "disksize",
  "created"
  "storagetype",
  "provisioningtype",
  "iscustomized",
  "miniops"
  "maxiops"
 ]


.. _DefaultServiceOffering_RU:

Предзаданные параметры вычислительных предложений
"""""""""""""""""""""""""""""""""""""""""""""""""""""""
Позволяет предопределить параметры предложений для пользовательских вычислительных предложений: количество ядер CPU, скорость CPU и/или памяти.

Например,

::

 "defaultServiceOfferingConfig": {
   "031a55bb-5d6b-4336-ab93-d5dead28a887": {
	   "offering": "3890f81e-62aa-4a50-971a-f066223d623d",
	   "customOfferingParams": {
	      "cpuNumber": 2,
	      "cpuSpeed": 1000,
	      "memory": 1024
	   }
	}
 }

Политика совместимости предложений
"""""""""""""""""""""""""""""""""""""""""""""""
Позволяет установить тип сравнения и игнорирования тегов ВМ при изменении вычислительных предложений из одного кластера на вычислительные предложения другого кластера:

::

 "offeringCompatibilityPolicy": {
  "offeringChangePolicy": "exactly-match",
  "offeringChangePolicyIgnoreTags": ["t1"]
 }

Настройки образов
-----------------------------

.. _TemplateGroups_RU:

Группы шаблонов
""""""""""""""""""""""""

Позволяет задать группы для сортировки источников установки (шаблоны и ISO).

Для группы шаблонов обязательным параметром является id и необязательными являются параметры перевода. Если параметры перевода не заданы, для группы будет использован ID.

::

 "templateGroups": [
  {
    "id": "id-234", //unique key
    "translations": {
      "ru": "Имя Темплейта", // russian translation
      "en": "Template Name" //english translation
  }
 ]



Расширения
------------------
Подробнее о конфигурациях расширений см.:

1. :ref:`WebShell_RU`
2. :ref:`Pulse`


